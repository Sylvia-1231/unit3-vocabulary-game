<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸‰è½®æŠ¢ç­”ç³»ç»Ÿ - Unit 3ï¼ˆä¿®å¤ç‰ˆï¼‰</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        /* é¡¶éƒ¨æ  */
        .top-bar {
            background: white;
            padding: 25px 40px;
            border-radius: 20px;
            margin-bottom: 25px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .top-bar h1 {
            color: #667eea;
            font-size: 2.5em;
        }

        .round-indicator {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 15px 30px;
            border-radius: 30px;
            font-size: 1.5em;
            font-weight: bold;
        }

        /* ç§¯åˆ†æ¦œ */
        .scoreboard {
            background: white;
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 25px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .scoreboard h2 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 25px;
            font-size: 2em;
        }

        .scores-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
        }

        .score-card {
            text-align: center;
            padding: 25px;
            border-radius: 15px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-top: 5px solid;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .score-card::before {
            content: '';
            position: absolute;
            top: -100%;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, transparent 70%);
            transition: top 0.3s;
        }

        .score-card.flash::before {
            animation: flash 0.5s;
        }

        @keyframes flash {
            0%, 100% { top: -100%; }
            50% { top: 0; }
        }

        .score-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .score-card.team-1 { border-color: #e74c3c; }
        .score-card.team-2 { border-color: #3498db; }
        .score-card.team-3 { border-color: #2ecc71; }
        .score-card.team-4 { border-color: #f39c12; }
        .score-card.team-5 { border-color: #9b59b6; }

        .team-name {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .team-score {
            font-size: 3.5em;
            font-weight: bold;
            font-family: 'Arial Black', sans-serif;
        }

        .score-card.team-1 .team-score { color: #e74c3c; }
        .score-card.team-2 .team-score { color: #3498db; }
        .score-card.team-3 .team-score { color: #2ecc71; }
        .score-card.team-4 .team-score { color: #f39c12; }
        .score-card.team-5 .team-score { color: #9b59b6; }

        /* é¢˜ç›®å¡ç‰‡ */
        .question-card {
            background: white;
            padding: 50px;
            border-radius: 20px;
            margin-bottom: 25px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            text-align: center;
        }

        .question-type {
            font-size: 1.5em;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        .question-content {
            font-size: 3em;
            font-weight: bold;
            color: #2c3e50;
            margin: 30px 0;
            line-height: 1.5;
        }

        .blank-space {
            color: #e74c3c;
            border-bottom: 4px dashed #e74c3c;
            padding: 0 30px;
            display: inline-block;
            min-width: 150px;
        }

        .question-hint {
            font-size: 1.3em;
            color: #95a5a6;
            margin-top: 20px;
        }

        /* ä¸­æ–‡é‡Šä¹‰ */
        .chinese-meaning {
            font-size: 1.8em;
            color: #667eea;
            background: #f0f4ff;
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            font-weight: 500;
        }

        /* æŠ¢ç­”æŒ‰é’®ç»„ */
        .buzzer-buttons {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
            margin-bottom: 25px;
        }

        .buzzer-btn {
            padding: 40px 20px;
            border: none;
            border-radius: 15px;
            font-size: 2em;
            font-weight: bold;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            position: relative;
            overflow: hidden;
        }

        .buzzer-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255,255,255,0.5);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .buzzer-btn:active::before {
            width: 300px;
            height: 300px;
        }

        .buzzer-btn:hover {
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
        }

        .buzzer-btn:active {
            transform: translateY(-4px) scale(0.98);
        }

        .buzzer-btn.team-1 { background: linear-gradient(135deg, #e74c3c, #c0392b); }
        .buzzer-btn.team-2 { background: linear-gradient(135deg, #3498db, #2980b9); }
        .buzzer-btn.team-3 { background: linear-gradient(135deg, #2ecc71, #27ae60); }
        .buzzer-btn.team-4 { background: linear-gradient(135deg, #f39c12, #e67e22); }
        .buzzer-btn.team-5 { background: linear-gradient(135deg, #9b59b6, #8e44ad); }

        /* AIè®²è§£å¡ç‰‡ */
        .explanation-card {
            background: white;
            padding: 40px;
            border-radius: 20px;
            margin-bottom: 25px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            display: none;
        }

        .explanation-card.show {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .explanation-card h3 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 25px;
            text-align: center;
        }

        .vocab-details {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .word-header {
            font-size: 2.5em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .pronunciation {
            font-size: 1.5em;
            color: #7f8c8d;
            font-style: italic;
            margin-bottom: 20px;
        }

        .meaning {
            font-size: 1.8em;
            color: #34495e;
            padding: 15px;
            background: white;
            border-radius: 10px;
            margin-bottom: 25px;
        }

        .detail-section {
            margin: 20px 0;
        }

        .detail-section h4 {
            color: #667eea;
            font-size: 1.5em;
            margin-bottom: 15px;
        }

        .detail-section ul {
            list-style: none;
            padding-left: 0;
        }

        .detail-section li {
            padding: 12px 20px;
            background: white;
            margin: 8px 0;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            font-size: 1.2em;
            line-height: 1.6;
        }

        /* ç¿»è¯‘è¾“å…¥åŒº */
        .translation-inputs {
            display: grid;
            gap: 20px;
            margin-bottom: 25px;
        }

        .translation-group {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 5px solid;
        }

        .translation-group.team-1 { border-color: #e74c3c; }
        .translation-group.team-2 { border-color: #3498db; }
        .translation-group.team-3 { border-color: #2ecc71; }
        .translation-group.team-4 { border-color: #f39c12; }
        .translation-group.team-5 { border-color: #9b59b6; }

        .translation-group h4 {
            font-size: 1.5em;
            margin-bottom: 15px;
            color: #2c3e50;
        }

        .translation-group textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #ecf0f1;
            border-radius: 10px;
            font-size: 1.2em;
            min-height: 100px;
            resize: vertical;
            font-family: inherit;
        }

        .translation-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        /* è¯„åˆ†ç»“æœ */
        .scoring-results {
            display: grid;
            gap: 20px;
            margin-bottom: 25px;
        }

        .result-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-left: 5px solid;
        }

        .result-card.team-1 { border-color: #e74c3c; }
        .result-card.team-2 { border-color: #3498db; }
        .result-card.team-3 { border-color: #2ecc71; }
        .result-card.team-4 { border-color: #f39c12; }
        .result-card.team-5 { border-color: #9b59b6; }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .result-team-name {
            font-size: 1.8em;
            font-weight: bold;
            color: #2c3e50;
        }

        .result-score {
            font-size: 2.5em;
            font-weight: bold;
        }

        .result-card.team-1 .result-score { color: #e74c3c; }
        .result-card.team-2 .result-score { color: #3498db; }
        .result-card.team-3 .result-score { color: #2ecc71; }
        .result-card.team-4 .result-score { color: #f39c12; }
        .result-card.team-5 .result-score { color: #9b59b6; }

        .result-translation {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
            font-size: 1.2em;
            font-style: italic;
            color: #34495e;
        }

        .result-feedback {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .result-feedback h5 {
            color: #27ae60;
            margin-bottom: 10px;
        }

        .result-feedback p {
            color: #34495e;
            line-height: 1.6;
        }

        /* æŒ‰é’® */
        .btn {
            padding: 18px 40px;
            border: none;
            border-radius: 12px;
            font-size: 1.4em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }

        .btn-success {
            background: linear-gradient(135deg, #56ab2f, #a8e063);
        }

        .btn-warning {
            background: linear-gradient(135deg, #f2994a, #f2c94c);
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .controls {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
        }

        /* è®¾ç½®é¢æ¿ */
        .setup-panel {
            background: white;
            padding: 50px;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .setup-panel h2 {
            color: #2c3e50;
            font-size: 2.5em;
            margin-bottom: 30px;
            text-align: center;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            font-size: 1.3em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .team-inputs {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
        }

        .team-input-wrapper {
            text-align: center;
        }

        .team-input-wrapper label {
            display: block;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .team-input-wrapper input {
            width: 100%;
            padding: 15px;
            border: 2px solid #ecf0f1;
            border-radius: 10px;
            font-size: 1.2em;
        }

        /* åŠ è½½åŠ¨ç”» */
        .loading {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 9999;
            justify-content: center;
            align-items: center;
        }

        .loading.show {
            display: flex;
        }

        .loading-content {
            background: white;
            padding: 50px;
            border-radius: 20px;
            text-align: center;
        }

        .spinner {
            width: 80px;
            height: 80px;
            border: 8px solid #f3f3f3;
            border-top: 8px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 30px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* å“åº”å¼ */
        @media (max-width: 1200px) {
            .scores-grid,
            .buzzer-buttons,
            .team-inputs {
                grid-template-columns: repeat(3, 1fr);
            }
            .question-content {
                font-size: 2.2em;
            }
        }

        @media (max-width: 768px) {
            .scores-grid,
            .buzzer-buttons,
            .team-inputs {
                grid-template-columns: 1fr;
            }
            .question-content {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- è®¾ç½®é¢æ¿ -->
        <div id="setupPanel" class="setup-panel">
            <h2>ğŸ® ä¸‰è½®æŠ¢ç­”ç³»ç»Ÿ - Unit 3</h2>
            
            <div class="form-group">
                <label>æœ¬å•å…ƒåŒ…å«16ä¸ªè¯æ±‡/çŸ­è¯­</label>
                <p style="text-align: center; color: #7f8c8d; font-size: 1.1em; margin-top: 10px;">
                    ç¬¬1è½®ï¼šè¯æ±‡æŠ¢ç­”ï¼ˆ10åˆ†/è¯ï¼‰ | ç¬¬2è½®ï¼šè§‚ç‚¹å¥å¡«ç©ºï¼ˆ15åˆ†/å¥ï¼‰ | ç¬¬3è½®ï¼šè§‚ç‚¹å¥ç¿»è¯‘ï¼ˆ100åˆ†/å¥ï¼‰
                </p>
            </div>

            <div class="form-group">
                <label>é˜Ÿä¼åç§°è®¾ç½®ï¼š</label>
                <div class="team-inputs">
                    <div class="team-input-wrapper">
                        <label style="color: #e74c3c;">ç¬¬1ç»„</label>
                        <input type="text" id="team1Name" value="çº¢é˜Ÿ">
                    </div>
                    <div class="team-input-wrapper">
                        <label style="color: #3498db;">ç¬¬2ç»„</label>
                        <input type="text" id="team2Name" value="è“é˜Ÿ">
                    </div>
                    <div class="team-input-wrapper">
                        <label style="color: #2ecc71;">ç¬¬3ç»„</label>
                        <input type="text" id="team3Name" value="ç»¿é˜Ÿ">
                    </div>
                    <div class="team-input-wrapper">
                        <label style="color: #f39c12;">ç¬¬4ç»„</label>
                        <input type="text" id="team4Name" value="é»„é˜Ÿ">
                    </div>
                    <div class="team-input-wrapper">
                        <label style="color: #9b59b6;">ç¬¬5ç»„</label>
                        <input type="text" id="team5Name" value="ç´«é˜Ÿ">
                    </div>
                </div>
            </div>

            <button class="btn btn-primary" onclick="startGame()" style="width: 100%; margin-top: 30px; padding: 25px; font-size: 1.8em;">
                ğŸš€ å¼€å§‹æ¸¸æˆ
            </button>
        </div>

        <!-- æ¸¸æˆåŒºåŸŸ -->
        <div id="gameArea" style="display: none;">
            <!-- é¡¶éƒ¨æ  -->
            <div class="top-bar">
                <h1>ğŸ¯ Unit 3 è¯æ±‡æŒ‘æˆ˜èµ›</h1>
                <div class="round-indicator" id="roundIndicator">
                    ç¬¬ä¸€è½®ï¼šè¯æ±‡æŠ¢ç­”
                </div>
            </div>

            <!-- ç§¯åˆ†æ¦œ -->
            <div class="scoreboard">
                <h2>ğŸ“Š å®æ—¶ç§¯åˆ†æ¦œ</h2>
                <div class="scores-grid" id="scoresGrid">
                    <!-- åŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>

            <!-- é¢˜ç›®æ˜¾ç¤º -->
            <div class="question-card" id="questionCard">
                <div class="question-type" id="questionType">è¯æ±‡æŠ¢ç­”</div>
                <div class="question-content" id="questionContent">
                    æ³¨æ„ï¼›å…³æ³¨
                </div>
                <div class="chinese-meaning" id="chineseMeaning" style="display: none;">
                    <!-- ç¬¬äºŒè½®æ˜¾ç¤ºä¸­æ–‡é‡Šä¹‰ -->
                </div>
                <div class="question-hint" id="questionHint">
                    æç¤ºï¼š9ä¸ªå­—æ¯
                </div>
            </div>

            <!-- æŠ¢ç­”æŒ‰é’®ï¼ˆç¬¬ä¸€ã€äºŒè½®ï¼‰ -->
            <div class="buzzer-buttons" id="buzzerButtons">
                <!-- åŠ¨æ€ç”Ÿæˆ -->
            </div>

            <!-- ç¿»è¯‘è¾“å…¥åŒºï¼ˆç¬¬ä¸‰è½®ï¼‰ -->
            <div class="translation-inputs" id="translationInputs" style="display: none;">
                <!-- åŠ¨æ€ç”Ÿæˆ -->
            </div>

            <!-- AIè®²è§£å¡ç‰‡ -->
            <div class="explanation-card" id="explanationCard">
                <!-- åŠ¨æ€ç”Ÿæˆ -->
            </div>

            <!-- è¯„åˆ†ç»“æœï¼ˆç¬¬ä¸‰è½®ï¼‰ -->
            <div class="scoring-results" id="scoringResults" style="display: none;">
                <!-- åŠ¨æ€ç”Ÿæˆ -->
            </div>

            <!-- æ§åˆ¶æŒ‰é’® -->
            <div class="controls">
                <button class="btn btn-success" id="nextBtn" onclick="nextQuestion()" style="display: none;">
                    â–¶ï¸ ä¸‹ä¸€é¢˜
                </button>
                <button class="btn btn-warning" onclick="resetGame()">
                    ğŸ”„ é‡æ–°å¼€å§‹
                </button>
            </div>
        </div>
    </div>

    <!-- åŠ è½½åŠ¨ç”» -->
    <div class="loading" id="loading">
        <div class="loading-content">
            <div class="spinner"></div>
            <h2>AIæ­£åœ¨ç”Ÿæˆå†…å®¹...</h2>
        </div>
    </div>

    <script>
        // ============ Unit 3 è¯æ±‡æ•°æ®ï¼ˆå·²ä¿®æ­£ç¬¬äºŒè½®æŒ–ç©ºï¼‰ ============
        const UNIT3_VOCABULARY = [
            {
                word: 'attention',
                pronunciation: '/É™ËˆtenÊƒn/',
                round1: {
                    chinese: 'æ³¨æ„ï¼›å…³æ³¨',
                    answer: 'attention'
                },
                round2: {
                    sentence: 'In today\'s digital age, many people find it increasingly difficult to pay _____ to a single task for an extended period.',
                    chineseMeaning: 'åœ¨å½“ä»Šæ•°å­—æ—¶ä»£ï¼Œè®¸å¤šäººå‘ç°è¶Šæ¥è¶Šéš¾ä»¥é•¿æ—¶é—´ä¸“æ³¨äºå•ä¸€ä»»åŠ¡ã€‚',
                    answer: 'attention'
                },
                round3: {
                    chinese: 'éšç€ç¤¾äº¤åª’ä½“çš„æ™®åŠï¼Œäººä»¬çš„æ³¨æ„åŠ›æŒç»­æ—¶é—´æ˜¾è‘—ç¼©çŸ­ï¼Œè¿™å¯¹å­¦ä¹ å’Œå·¥ä½œæ•ˆç‡äº§ç”Ÿäº†è´Ÿé¢å½±å“ã€‚',
                    reference: 'With the widespread use of social media, people\'s attention span has significantly decreased, which has negatively impacted learning and work efficiency.',
                    keywords: ['attention span', 'social media', 'decreased', 'negatively impact', 'efficiency']
                }
            },
            {
                word: 'casualty',
                pronunciation: '/ËˆkÃ¦Ê’uÉ™lti/',
                round1: {
                    chinese: 'ä¼¤äº¡äººå‘˜ï¼›å—å®³è€…',
                    answer: 'casualty'
                },
                round2: {
                    sentence: 'Despite significant advancements in vehicle safety technology, traffic accidents continue to claim numerous _____ each year, highlighting the need for stricter regulations.',
                    chineseMeaning: 'å°½ç®¡æ±½è½¦å®‰å…¨æŠ€æœ¯å–å¾—äº†é‡å¤§è¿›å±•ï¼Œä½†äº¤é€šäº‹æ•…æ¯å¹´ä»é€ æˆå¤§é‡ä¼¤äº¡ï¼Œè¿™å‡¸æ˜¾äº†æ›´ä¸¥æ ¼ç›‘ç®¡çš„å¿…è¦æ€§ã€‚',
                    answer: 'casualties'
                },
                round3: {
                    chinese: 'è‡ªç„¶ç¾å®³ä¸ä»…é€ æˆå¤§é‡äººå‘˜ä¼¤äº¡ï¼Œè¿˜ç»™ç»æµå‘å±•å¸¦æ¥ä¸¥é‡å½±å“ï¼Œå› æ­¤åŠ å¼ºé˜²ç¾å‡ç¾èƒ½åŠ›å»ºè®¾è‡³å…³é‡è¦ã€‚',
                    reference: 'Natural disasters not only result in numerous casualties but also severely impact economic development, making it crucial to strengthen disaster prevention and mitigation capabilities.',
                    keywords: ['casualties', 'natural disasters', 'economic development', 'crucial', 'prevention', 'mitigation']
                }
            },
            {
                word: 'drown',
                pronunciation: '/draÊŠn/',
                round1: {
                    chinese: 'æ·¹æ­»ï¼›æººæ­»ï¼›æ·¹æ²¡',
                    answer: 'drown'
                },
                round2: {
                    sentence: 'In the modern workplace, employees often feel as though they are _____ in endless emails and meetings, which significantly reduces their productivity.',
                    chineseMeaning: 'åœ¨ç°ä»£èŒåœºä¸­ï¼Œå‘˜å·¥ç»å¸¸æ„Ÿè§‰è‡ªå·±æ·¹æ²¡åœ¨æ— å°½çš„é‚®ä»¶å’Œä¼šè®®ä¸­ï¼Œè¿™å¤§å¤§é™ä½äº†ä»–ä»¬çš„å·¥ä½œæ•ˆç‡ã€‚',
                    answer: 'drowning'
                },
                round3: {
                    chinese: 'è®¸å¤šå­¦ç”Ÿè¢«ç¹é‡çš„ä½œä¸šå’Œè€ƒè¯•å‹åŠ›æ‰€æ·¹æ²¡ï¼Œä»¥è‡³äºå¤±å»äº†å­¦ä¹ çš„ä¹è¶£å’Œåˆ›é€ åŠ›ã€‚',
                    reference: 'Many students are drowning in heavy homework and exam pressure to such an extent that they lose the joy of learning and creativity.',
                    keywords: ['drown', 'homework', 'pressure', 'lose', 'creativity', 'joy of learning']
                }
            },
            {
                word: 'envious',
                pronunciation: '/ËˆenviÉ™s/',
                round1: {
                    chinese: 'ç¾¡æ…•çš„ï¼›å«‰å¦’çš„',
                    answer: 'envious'
                },
                round2: {
                    sentence: 'Social media platforms often trigger _____ feelings among users as they constantly compare their lives with the carefully curated images posted by others.',
                    chineseMeaning: 'ç¤¾äº¤åª’ä½“å¹³å°ç»å¸¸åœ¨ç”¨æˆ·ä¸­å¼•å‘å«‰å¦’æƒ…ç»ªï¼Œå› ä¸ºä»–ä»¬ä¸æ–­å°†è‡ªå·±çš„ç”Ÿæ´»ä¸ä»–äººç²¾å¿ƒç­–åˆ’çš„å›¾ç‰‡è¿›è¡Œæ¯”è¾ƒã€‚',
                    answer: 'envious'
                },
                round3: {
                    chinese: 'ä¸å…¶ç¾¡æ…•ä»–äººçš„æˆåŠŸï¼Œä¸å¦‚ä¸“æ³¨äºè‡ªå·±çš„æˆé•¿å’Œè¿›æ­¥ï¼Œè¿™æ‰æ˜¯å®ç°ä¸ªäººä»·å€¼çš„æ­£ç¡®é€”å¾„ã€‚',
                    reference: 'Rather than being envious of others\' success, it is better to focus on one\'s own growth and progress, which is the right path to achieving personal value.',
                    keywords: ['envious', 'success', 'focus on', 'growth', 'progress', 'personal value']
                }
            },
            {
                word: 'ignorant',
                pronunciation: '/ËˆÉªÉ¡nÉ™rÉ™nt/',
                round1: {
                    chinese: 'æ— çŸ¥çš„ï¼›ä¸äº†è§£çš„',
                    answer: 'ignorant'
                },
                round2: {
                    sentence: 'Being _____ of cultural differences can lead to serious misunderstandings in international business negotiations, potentially damaging valuable partnerships.',
                    chineseMeaning: 'å¯¹æ–‡åŒ–å·®å¼‚çš„æ— çŸ¥å¯èƒ½å¯¼è‡´å›½é™…å•†åŠ¡è°ˆåˆ¤ä¸­çš„ä¸¥é‡è¯¯è§£ï¼Œä»è€Œå¯èƒ½æŸå®³å®è´µçš„åˆä½œå…³ç³»ã€‚',
                    answer: 'ignorant'
                },
                round3: {
                    chinese: 'åœ¨ä¿¡æ¯æ—¶ä»£ï¼Œå¯¹æ–°æŠ€æœ¯ä¿æŒæ— çŸ¥æ˜¯å±é™©çš„ï¼Œå› ä¸ºè¿™ä¼šä½¿ä¸ªäººåœ¨å°±ä¸šå¸‚åœºä¸Šå¤±å»ç«äº‰åŠ›ã€‚',
                    reference: 'In the information age, remaining ignorant of new technologies is dangerous, as it will cause individuals to lose competitiveness in the job market.',
                    keywords: ['ignorant', 'new technologies', 'information age', 'competitiveness', 'job market']
                }
            },
            {
                word: 'old-fashioned',
                pronunciation: '/ËŒÉ™ÊŠld ËˆfÃ¦Êƒnd/',
                round1: {
                    chinese: 'è¿‡æ—¶çš„ï¼›è€å¼çš„',
                    answer: 'old-fashioned'
                },
                round2: {
                    sentence: 'While some may consider traditional teaching methods _____, research suggests that they can be highly effective when combined with modern technology.',
                    chineseMeaning: 'è™½ç„¶æœ‰äº›äººå¯èƒ½è®¤ä¸ºä¼ ç»Ÿæ•™å­¦æ–¹æ³•å·²ç»è¿‡æ—¶ï¼Œä½†ç ”ç©¶è¡¨æ˜ï¼Œå½“ä¸ç°ä»£æŠ€æœ¯ç›¸ç»“åˆæ—¶ï¼Œå®ƒä»¬å¯ä»¥éå¸¸æœ‰æ•ˆã€‚',
                    answer: 'old-fashioned'
                },
                round3: {
                    chinese: 'å°½ç®¡ç”µå­ä¹¦è¶Šæ¥è¶Šæµè¡Œï¼Œä½†è®¸å¤šè¯»è€…ä»ç„¶åçˆ±ä¼ ç»Ÿçº¸è´¨ä¹¦ï¼Œè®¤ä¸ºå®ƒä»¬æä¾›äº†æ›´å¥½çš„é˜…è¯»ä½“éªŒã€‚',
                    reference: 'Despite the growing popularity of e-books, many readers still prefer old-fashioned paper books, believing they provide a better reading experience.',
                    keywords: ['old-fashioned', 'e-books', 'prefer', 'paper books', 'reading experience']
                }
            },
            {
                word: 'physician',
                pronunciation: '/fÉªËˆzÉªÊƒn/',
                round1: {
                    chinese: 'åŒ»ç”Ÿï¼›å†…ç§‘åŒ»ç”Ÿ',
                    answer: 'physician'
                },
                round2: {
                    sentence: 'With the advancement of artificial intelligence, _____ can now diagnose diseases more accurately and efficiently, though human judgment remains irreplaceable.',
                    chineseMeaning: 'éšç€äººå·¥æ™ºèƒ½çš„è¿›æ­¥ï¼ŒåŒ»ç”Ÿç°åœ¨å¯ä»¥æ›´å‡†ç¡®ã€æ›´é«˜æ•ˆåœ°è¯Šæ–­ç–¾ç—…ï¼Œå°½ç®¡äººç±»çš„åˆ¤æ–­åŠ›ä»ç„¶ä¸å¯æ›¿ä»£ã€‚',
                    answer: 'physicians'
                },
                round3: {
                    chinese: 'åŒ»ç”ŸçŸ­ç¼ºå·²æˆä¸ºè®¸å¤šå‘å±•ä¸­å›½å®¶é¢ä¸´çš„ä¸¥é‡é—®é¢˜ï¼Œè¿™ä¸¥é‡å½±å“äº†åŒ»ç–—æœåŠ¡çš„è´¨é‡å’Œå¯åŠæ€§ã€‚',
                    reference: 'The shortage of physicians has become a serious problem facing many developing countries, which severely affects the quality and accessibility of healthcare services.',
                    keywords: ['shortage', 'physicians', 'developing countries', 'healthcare services', 'accessibility']
                }
            },
            {
                word: 'prescription',
                pronunciation: '/prÉªËˆskrÉªpÊƒn/',
                round1: {
                    chinese: 'å¤„æ–¹ï¼›è¯æ–¹',
                    answer: 'prescription'
                },
                round2: {
                    sentence: 'The overuse of _____ drugs has become a growing concern, as many patients develop dependency without fully understanding the potential risks.',
                    chineseMeaning: 'å¤„æ–¹è¯çš„è¿‡åº¦ä½¿ç”¨å·²æˆä¸ºä¸€ä¸ªæ—¥ç›Šä¸¥é‡çš„é—®é¢˜ï¼Œå› ä¸ºè®¸å¤šæ‚£è€…åœ¨æ²¡æœ‰å……åˆ†äº†è§£æ½œåœ¨é£é™©çš„æƒ…å†µä¸‹äº§ç”Ÿäº†ä¾èµ–æ€§ã€‚',
                    answer: 'prescription'
                },
                round3: {
                    chinese: 'æ”¿åºœåº”è¯¥åŠ å¼ºå¯¹å¤„æ–¹è¯çš„ç›‘ç®¡ï¼Œé˜²æ­¢è¯ç‰©æ»¥ç”¨ï¼ŒåŒæ—¶ç¡®ä¿çœŸæ­£éœ€è¦è¯ç‰©çš„æ‚£è€…èƒ½å¤Ÿè·å¾—æ²»ç–—ã€‚',
                    reference: 'The government should strengthen the regulation of prescription drugs to prevent drug abuse while ensuring that patients who genuinely need medication can access treatment.',
                    keywords: ['prescription drugs', 'regulation', 'prevent', 'drug abuse', 'access', 'treatment']
                }
            },
            {
                word: 'slip',
                pronunciation: '/slÉªp/',
                round1: {
                    chinese: 'æ»‘å€’ï¼›ä¸‹æ»‘',
                    answer: 'slip'
                },
                round2: {
                    sentence: 'Even the most successful companies can _____ from their leading positions if they fail to innovate and adapt to changing market conditions.',
                    chineseMeaning: 'å³ä½¿æ˜¯æœ€æˆåŠŸçš„å…¬å¸ï¼Œå¦‚æœä¸èƒ½åˆ›æ–°å’Œé€‚åº”ä¸æ–­å˜åŒ–çš„å¸‚åœºæ¡ä»¶ï¼Œä¹Ÿä¼šä»é¢†å…ˆåœ°ä½ä¸Šæ»‘è½ã€‚',
                    answer: 'slip'
                },
                round3: {
                    chinese: 'å­¦ç”Ÿçš„æˆç»©å¯èƒ½ä¼šå› ä¸ºç¼ºä¹æŒç»­åŠªåŠ›è€Œè¿…é€Ÿä¸‹æ»‘ï¼Œè¿™æé†’æˆ‘ä»¬å­¦ä¹ éœ€è¦åšæŒä¸æ‡ˆã€‚',
                    reference: 'Students\' grades may slip rapidly due to a lack of consistent effort, which reminds us that learning requires perseverance.',
                    keywords: ['grades', 'slip', 'lack of effort', 'perseverance', 'consistent']
                }
            },
            {
                word: 'trend',
                pronunciation: '/trend/',
                round1: {
                    chinese: 'è¶‹åŠ¿ï¼›æ½®æµ',
                    answer: 'trend'
                },
                round2: {
                    sentence: 'The _____ toward remote work has fundamentally transformed the traditional office culture, offering both opportunities and challenges for organizations.',
                    chineseMeaning: 'è¿œç¨‹å·¥ä½œçš„è¶‹åŠ¿ä»æ ¹æœ¬ä¸Šæ”¹å˜äº†ä¼ ç»Ÿçš„åŠå…¬å®¤æ–‡åŒ–ï¼Œä¸ºç»„ç»‡å¸¦æ¥äº†æœºé‡å’ŒæŒ‘æˆ˜ã€‚',
                    answer: 'trend'
                },
                round3: {
                    chinese: 'å¯æŒç»­å‘å±•å·²æˆä¸ºå…¨çƒè¶‹åŠ¿ï¼Œè¶Šæ¥è¶Šå¤šçš„ä¼ä¸šå¼€å§‹é‡è§†ç¯å¢ƒä¿æŠ¤å’Œç¤¾ä¼šè´£ä»»ã€‚',
                    reference: 'Sustainable development has become a global trend, with an increasing number of companies beginning to emphasize environmental protection and social responsibility.',
                    keywords: ['trend', 'sustainable development', 'environmental protection', 'social responsibility', 'companies']
                }
            },
            {
                word: 'be ignorant of/about',
                pronunciation: '',
                round1: {
                    chinese: 'å¯¹...æ— çŸ¥ï¼›ä¸äº†è§£',
                    answer: 'be ignorant of/about'
                },
                round2: {
                    sentence: 'Many young people _____ the historical events that shaped their nation, which may lead to a lack of appreciation for current freedoms.',
                    chineseMeaning: 'è®¸å¤šå¹´è½»äººå¯¹å¡‘é€ å…¶å›½å®¶çš„å†å²äº‹ä»¶ä¸€æ— æ‰€çŸ¥ï¼Œè¿™å¯èƒ½å¯¼è‡´ä»–ä»¬ç¼ºä¹å¯¹å½“å‰è‡ªç”±çš„æ„Ÿæ¿€ä¹‹æƒ…ã€‚',
                    answer: 'are ignorant of'
                },
                round3: {
                    chinese: 'æ¶ˆè´¹è€…ä¸åº”è¯¥å¯¹è‡ªå·±è´­ä¹°çš„äº§å“æˆåˆ†ä¸€æ— æ‰€çŸ¥ï¼Œè€Œåº”è¯¥åŸ¹å…»ä»”ç»†é˜…è¯»æ ‡ç­¾çš„ä¹ æƒ¯ã€‚',
                    reference: 'Consumers should not be ignorant of the ingredients in the products they purchase, but rather develop the habit of carefully reading labels.',
                    keywords: ['ignorant of', 'ingredients', 'consumers', 'develop the habit', 'reading labels']
                }
            },
            {
                word: 'get rid of',
                pronunciation: '',
                round1: {
                    chinese: 'æ‘†è„±ï¼›é™¤æ‰',
                    answer: 'get rid of'
                },
                round2: {
                    sentence: 'To improve public health, governments must implement comprehensive strategies to help citizens _____ harmful habits such as smoking and excessive drinking.',
                    chineseMeaning: 'ä¸ºäº†æ”¹å–„å…¬å…±å¥åº·ï¼Œæ”¿åºœå¿…é¡»å®æ–½ç»¼åˆç­–ç•¥ï¼Œå¸®åŠ©å…¬æ°‘æ‘†è„±å¸çƒŸå’Œè¿‡åº¦é¥®é…’ç­‰æœ‰å®³ä¹ æƒ¯ã€‚',
                    answer: 'get rid of'
                },
                round3: {
                    chinese: 'æ•™è‚²çš„ç›®çš„ä¸ä»…æ˜¯ä¼ æˆçŸ¥è¯†ï¼Œæ›´é‡è¦çš„æ˜¯å¸®åŠ©å­¦ç”Ÿæ‘†è„±å›ºæœ‰æ€ç»´æ¨¡å¼ï¼ŒåŸ¹å…»æ‰¹åˆ¤æ€§æ€ç»´èƒ½åŠ›ã€‚',
                    reference: 'The purpose of education is not only to impart knowledge, but more importantly, to help students get rid of fixed thinking patterns and develop critical thinking skills.',
                    keywords: ['get rid of', 'education', 'fixed thinking patterns', 'critical thinking', 'develop']
                }
            },
            {
                word: 'take effect',
                pronunciation: '',
                round1: {
                    chinese: 'ç”Ÿæ•ˆï¼›èµ·ä½œç”¨',
                    answer: 'take effect'
                },
                round2: {
                    sentence: 'New environmental regulations are expected to _____ next month, requiring all factories to significantly reduce their carbon emissions.',
                    chineseMeaning: 'æ–°çš„ç¯å¢ƒæ³•è§„é¢„è®¡å°†äºä¸‹æœˆç”Ÿæ•ˆï¼Œè¦æ±‚æ‰€æœ‰å·¥å‚å¤§å¹…å‡å°‘ç¢³æ’æ”¾ã€‚',
                    answer: 'take effect'
                },
                round3: {
                    chinese: 'æ•™è‚²æ”¹é©å¾€å¾€éœ€è¦è¾ƒé•¿æ—¶é—´æ‰èƒ½è§æ•ˆï¼Œå› æ­¤æ”¿ç­–åˆ¶å®šè€…åº”è¯¥ä¿æŒè€å¿ƒå¹¶æŒç»­è¯„ä¼°å…¶æ•ˆæœã€‚',
                    reference: 'Educational reforms often take a long time to take effect, so policymakers should remain patient and continuously evaluate their effectiveness.',
                    keywords: ['take effect', 'educational reforms', 'policymakers', 'patient', 'evaluate', 'effectiveness']
                }
            },
            {
                word: 'take off',
                pronunciation: '',
                round1: {
                    chinese: 'èµ·é£ï¼›è„±æ‰ï¼›çªç„¶æˆåŠŸ',
                    answer: 'take off'
                },
                round2: {
                    sentence: 'The green energy industry has finally begun to _____ in recent years, driven by technological innovations and increasing environmental awareness.',
                    chineseMeaning: 'è¿‘å¹´æ¥ï¼Œåœ¨æŠ€æœ¯åˆ›æ–°å’Œç¯ä¿æ„è¯†å¢å¼ºçš„æ¨åŠ¨ä¸‹ï¼Œç»¿è‰²èƒ½æºäº§ä¸šç»ˆäºå¼€å§‹è…¾é£ã€‚',
                    answer: 'take off'
                },
                round3: {
                    chinese: 'ç”µå­å•†åŠ¡åœ¨ç–«æƒ…æœŸé—´è¿…é€Ÿå‘å±•ï¼Œå½»åº•æ”¹å˜äº†äººä»¬çš„è´­ç‰©ä¹ æƒ¯å’Œå•†ä¸šæ¨¡å¼ã€‚',
                    reference: 'E-commerce took off rapidly during the pandemic, fundamentally transforming people\'s shopping habits and business models.',
                    keywords: ['take off', 'e-commerce', 'pandemic', 'transforming', 'shopping habits', 'business models']
                }
            },
            {
                word: 'spend ... (in) doing sth.',
                pronunciation: '',
                round1: {
                    chinese: 'èŠ±è´¹(æ—¶é—´)åšæŸäº‹',
                    answer: 'spend ... doing'
                },
                round2: {
                    sentence: 'Research indicates that children who _____ excessive time playing video games may experience negative effects on their academic performance and social skills.',
                    chineseMeaning: 'ç ”ç©¶è¡¨æ˜ï¼ŒèŠ±è´¹è¿‡å¤šæ—¶é—´ç©ç”µå­æ¸¸æˆçš„å„¿ç«¥å¯èƒ½ä¼šå¯¹å…¶å­¦ä¸šæˆç»©å’Œç¤¾äº¤æŠ€èƒ½äº§ç”Ÿè´Ÿé¢å½±å“ã€‚',
                    answer: 'spend ... playing'
                },
                round3: {
                    chinese: 'ä¸å…¶æŠŠæ—¶é—´èŠ±åœ¨æŠ±æ€¨é—®é¢˜ä¸Šï¼Œä¸å¦‚ç§¯æå¯»æ‰¾è§£å†³æ–¹æ¡ˆï¼Œè¿™æ ·æ‰èƒ½çœŸæ­£å®ç°ä¸ªäººæˆé•¿ã€‚',
                    reference: 'Rather than spending time complaining about problems, it is better to actively seek solutions, which is the only way to truly achieve personal growth.',
                    keywords: ['spend time', 'complaining', 'seek solutions', 'personal growth', 'achieve']
                }
            },
            {
                word: 'make a crash-landing',
                pronunciation: '',
                round1: {
                    chinese: 'ç´§æ€¥è¿«é™ï¼›ç¡¬ç€é™†',
                    answer: 'make a crash-landing'
                },
                round2: {
                    sentence: 'When faced with unexpected economic crises, some businesses are forced to _____ by implementing drastic cost-cutting measures to survive.',
                    chineseMeaning: 'é¢å¯¹æ„å¤–çš„ç»æµå±æœºæ—¶ï¼Œä¸€äº›ä¼ä¸šè¢«è¿«é€šè¿‡å®æ–½ä¸¥å‰çš„æˆæœ¬å‰Šå‡æªæ–½æ¥ç´§æ€¥ç€é™†ä»¥æ±‚ç”Ÿå­˜ã€‚',
                    answer: 'make a crash-landing'
                },
                round3: {
                    chinese: 'å½“åŸè®¡åˆ’æ— æ³•å®æ–½æ—¶ï¼Œé¡¹ç›®å›¢é˜Ÿå¿…é¡»è¿…é€Ÿè°ƒæ•´ç­–ç•¥ï¼Œè™½ç„¶å¯èƒ½ä¸å¤Ÿå®Œç¾ï¼Œä½†èƒ½ç¡®ä¿é¡¹ç›®ä¸ä¼šå®Œå…¨å¤±è´¥ã€‚',
                    reference: 'When the original plan cannot be implemented, the project team must quickly adjust their strategy to make a crash-landing, which, though imperfect, ensures the project does not fail completely.',
                    keywords: ['crash-landing', 'adjust strategy', 'original plan', 'imperfect', 'ensure', 'fail']
                }
            }
        ];

        // ============ æ¸¸æˆçŠ¶æ€ ============
        let gameState = {
            round: 1,
            wordIndex: 0,
            teams: [],
            words: UNIT3_VOCABULARY,
            currentWord: null,
            showingExplanation: false
        };

        // ============ éŸ³æ•ˆç”Ÿæˆ ============
        const audioContext = new (window.AudioContext || window.webkitAudioContext)();

        function playSuccessSound() {
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 800;
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);

            setTimeout(() => {
                const osc2 = audioContext.createOscillator();
                const gain2 = audioContext.createGain();
                
                osc2.connect(gain2);
                gain2.connect(audioContext.destination);
                
                osc2.frequency.value = 1000;
                osc2.type = 'sine';
                
                gain2.gain.setValueAtTime(0.3, audioContext.currentTime);
                gain2.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                
                osc2.start(audioContext.currentTime);
                osc2.stop(audioContext.currentTime + 0.2);
            }, 100);
        }

        // ============ å¼€å§‹æ¸¸æˆ ============
        function startGame() {
            gameState.teams = [];
            for (let i = 1; i <= 5; i++) {
                const name = document.getElementById(`team${i}Name`).value.trim() || `ç¬¬${i}ç»„`;
                gameState.teams.push({
                    id: i,
                    name: name,
                    score: 0
                });
            }

            gameState.round = 1;
            gameState.wordIndex = 0;
            gameState.showingExplanation = false;

            document.getElementById('setupPanel').style.display = 'none';
            document.getElementById('gameArea').style.display = 'block';

            initializeScoreboard();
            initializeBuzzerButtons();
            showQuestion();
        }

        // ============ åˆå§‹åŒ–ç§¯åˆ†æ¦œ ============
        function initializeScoreboard() {
            const container = document.getElementById('scoresGrid');
            container.innerHTML = '';

            gameState.teams.forEach((team, index) => {
                const card = document.createElement('div');
                card.className = `score-card team-${team.id}`;
                card.innerHTML = `
                    <div class="team-name">${team.name}</div>
                    <div class="team-score" id="score${team.id}">0</div>
                `;
                container.appendChild(card);
            });
        }

        // ============ åˆå§‹åŒ–æŠ¢ç­”æŒ‰é’® ============
        function initializeBuzzerButtons() {
            const container = document.getElementById('buzzerButtons');
            container.innerHTML = '';

            gameState.teams.forEach(team => {
                const btn = document.createElement('button');
                btn.className = `buzzer-btn team-${team.id}`;
                btn.textContent = team.name;
                btn.onclick = () => teamAnswered(team.id);
                container.appendChild(btn);
            });
        }

        // ============ æ˜¾ç¤ºé¢˜ç›® ============
        function showQuestion() {
            gameState.currentWord = gameState.words[gameState.wordIndex];
            gameState.showingExplanation = false;

            document.getElementById('explanationCard').classList.remove('show');
            document.getElementById('scoringResults').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('chineseMeaning').style.display = 'none';

            const roundNames = ['è¯æ±‡æŠ¢ç­”', 'è§‚ç‚¹å¥å¡«ç©º', 'è§‚ç‚¹å¥ç¿»è¯‘'];
            document.getElementById('roundIndicator').textContent = 
                `ç¬¬${gameState.round}è½®ï¼š${roundNames[gameState.round - 1]}`;
            
            document.getElementById('questionType').textContent = roundNames[gameState.round - 1];

            if (gameState.round === 1) {
                showRound1();
            } else if (gameState.round === 2) {
                showRound2();
            } else if (gameState.round === 3) {
                showRound3();
            }
        }

        // ============ ç¬¬ä¸€è½®ï¼šè¯æ±‡æŠ¢ç­” ============
        function showRound1() {
            const word = gameState.currentWord;
            
            document.getElementById('questionContent').textContent = word.round1.chinese;
            document.getElementById('questionHint').textContent = `æç¤ºï¼š${word.word.replace(/ /g, '').length}ä¸ªå­—æ¯${word.word.includes(' ') || word.word.includes('/') ? 'ï¼ˆå¯èƒ½å«ç©ºæ ¼æˆ–ç¬¦å·ï¼‰' : ''}`;
            
            document.getElementById('buzzerButtons').style.display = 'grid';
            document.getElementById('translationInputs').style.display = 'none';
        }

        // ============ ç¬¬äºŒè½®ï¼šè§‚ç‚¹å¥å¡«ç©ºï¼ˆä¿®å¤ç‰ˆï¼‰ ============
        function showRound2() {
            const word = gameState.currentWord;
            
            // å°†å¥å­ä¸­çš„ _____ æ›¿æ¢ä¸ºå¸¦æ ·å¼çš„ç©ºæ ¼
            const displaySentence = word.round2.sentence.replace(/_____/g, '<span class="blank-space">_____</span>');
            
            document.getElementById('questionContent').innerHTML = displaySentence;
            
            // æ˜¾ç¤ºä¸­æ–‡é‡Šä¹‰
            const meaningDiv = document.getElementById('chineseMeaning');
            meaningDiv.textContent = 'ğŸ“– ' + word.round2.chineseMeaning;
            meaningDiv.style.display = 'block';
            
            document.getElementById('questionHint').textContent = 'è¯·è¯´å‡ºç©ºæ ¼å¤„åº”å¡«çš„è¯æ±‡ï¼ˆéœ€æ³¨æ„è¯å½¢å˜åŒ–ï¼‰';
            
            document.getElementById('buzzerButtons').style.display = 'grid';
            document.getElementById('translationInputs').style.display = 'none';
        }

        // ============ ç¬¬ä¸‰è½®ï¼šè§‚ç‚¹å¥ç¿»è¯‘ ============
        function showRound3() {
            const word = gameState.currentWord;
            
            document.getElementById('questionContent').textContent = word.round3.chinese;
            document.getElementById('questionHint').textContent = 'å„ç»„è¯·åœ¨çº¸ä¸Šå†™å‡ºç¿»è¯‘ï¼ˆç¬¦åˆå››å…­çº§é«˜åˆ†æ ‡å‡†ï¼‰ï¼Œè€å¸ˆè¾“å…¥åAIè¯„åˆ†ï¼ˆæ»¡åˆ†100åˆ†ï¼‰';
            
            document.getElementById('buzzerButtons').style.display = 'none';
            document.getElementById('translationInputs').style.display = 'grid';

            const container = document.getElementById('translationInputs');
            container.innerHTML = '';

            gameState.teams.forEach(team => {
                const group = document.createElement('div');
                group.className = `translation-group team-${team.id}`;
                group.innerHTML = `
                    <h4>${team.name}çš„ç¿»è¯‘ï¼š</h4>
                    <textarea id="translation${team.id}" placeholder="è¯·è¾“å…¥è¯¥ç»„çš„ç¿»è¯‘..."></textarea>
                `;
                container.appendChild(group);
            });

            const controls = document.createElement('div');
            controls.className = 'controls';
            controls.innerHTML = `
                <button class="btn btn-success" onclick="evaluateTranslations()" style="font-size: 1.8em; padding: 25px 50px;">
                    ğŸ¤– AIè¯„åˆ†ï¼ˆæ»¡åˆ†100ï¼‰
                </button>
            `;
            container.appendChild(controls);
        }

        // ============ é˜Ÿä¼ç­”å¯¹ï¼ˆç¬¬ä¸€ã€äºŒè½®ï¼‰ ============
        function teamAnswered(teamId) {
            playSuccessSound();

            const points = gameState.round === 1 ? 10 : 15;
            const team = gameState.teams.find(t => t.id === teamId);
            team.score += points;

            const scoreCard = document.querySelector(`.score-card.team-${teamId}`);
            scoreCard.classList.add('flash');
            setTimeout(() => scoreCard.classList.remove('flash'), 500);

            document.getElementById(`score${teamId}`).textContent = team.score;

            showExplanation();
        }

        // ============ æ˜¾ç¤ºAIè®²è§£ ============
        async function showExplanation() {
            gameState.showingExplanation = true;
            
            document.getElementById('loading').classList.add('show');
            await new Promise(resolve => setTimeout(resolve, 1500));

            const word = gameState.currentWord;
            const card = document.getElementById('explanationCard');

            if (gameState.round === 1) {
                card.innerHTML = generateVocabExplanation(word);
            } else if (gameState.round === 2) {
                card.innerHTML = generateSentenceExplanation(word);
            }

            document.getElementById('loading').classList.remove('show');
            card.classList.add('show');
            document.getElementById('nextBtn').style.display = 'inline-block';
        }

        // ============ ç”Ÿæˆè¯æ±‡è®²è§£ ============
        function generateVocabExplanation(word) {
            return `
                <h3>ğŸ“š è¯æ±‡è¯¦è§£</h3>
                <div class="vocab-details">
                    <div class="word-header">${word.word}</div>
                    ${word.pronunciation ? `<div class="pronunciation">${word.pronunciation}</div>` : ''}
                    <div class="meaning">ğŸ’¡ ${word.round1.chinese}</div>
                    
                    <div class="detail-section">
                        <h4>ğŸ“– å››å…­çº§å¸¸ç”¨æ­é…</h4>
                        <ul>
                            ${generateCollocations(word.word).map(c => `<li>${c}</li>`).join('')}
                        </ul>
                    </div>

                    <div class="detail-section">
                        <h4>âœï¸ å†™ä½œåº”ç”¨åœºæ™¯</h4>
                        <ul>
                            ${generateWritingScenarios(word.word).map(s => `<li>${s}</li>`).join('')}
                        </ul>
                    </div>

                    <div class="detail-section">
                        <h4>âš ï¸ æ³¨æ„äº‹é¡¹</h4>
                        <ul>
                            ${generateUsageNotes(word.word).map(n => `<li>${n}</li>`).join('')}
                        </ul>
                    </div>
                </div>
            `;
        }

        // ============ ç”Ÿæˆä¾‹å¥åˆ†æï¼ˆä¿®å¤ç‰ˆ - é’ˆå¯¹å…·ä½“å¥å­ï¼‰ ============
        function generateSentenceExplanation(word) {
            const fullSentence = word.round2.sentence.replace(/_____/g, `<strong style="color: #667eea; font-size: 1.1em;">${word.round2.answer}</strong>`);
            
            return `
                <h3>âœ… å®Œæ•´è§‚ç‚¹å¥ä¸åˆ†æ</h3>
                <div class="vocab-details">
                    <div class="meaning" style="font-size: 1.3em; line-height: 1.6;">
                        ${fullSentence}
                    </div>

                    <div class="meaning" style="background: #f0f4ff; margin-top: 15px;">
                        ğŸ“– ${word.round2.chineseMeaning}
                    </div>

                    <div class="detail-section">
                        <h4>ğŸ¯ é«˜åˆ†è¡¨è¾¾äº®ç‚¹</h4>
                        <ul>
                            ${analyzeHighlights(word.round2.sentence).map(h => `<li>${h}</li>`).join('')}
                        </ul>
                    </div>

                    <div class="detail-section">
                        <h4>ğŸ“ æœ¬å¥å¥å‹ç»“æ„åˆ†æ</h4>
                        <ul>
                            ${analyzeSentencePatterns(word.round2.sentence).map(p => `<li>${p}</li>`).join('')}
                        </ul>
                    </div>

                    <div class="detail-section">
                        <h4>ğŸ’¡ å¯æ›¿æ¢çš„åŒä¹‰è¡¨è¾¾</h4>
                        <ul>
                            ${generateAlternatives(word.word).map(a => `<li>${a}</li>`).join('')}
                        </ul>
                    </div>
                </div>
            `;
        }

        // ============ åˆ†æå¥å­ä¸­çš„å¥å‹ç»“æ„ï¼ˆæ–°å¢å‡½æ•°ï¼‰ ============
        function analyzeSentencePatterns(sentence) {
            const patterns = [];
            const lowerSentence = sentence.toLowerCase();

            // æ£€æµ‹å®šè¯­ä»å¥
            if (sentence.match(/which|that(?!\s+is\s+why)|who/i)) {
                const match = sentence.match(/(.*?)(which|that|who)(.*?)([,.])/i);
                if (match) {
                    patterns.push(`<strong>å®šè¯­ä»å¥</strong>ï¼šä½¿ç”¨äº†"${match[2]}"å¼•å¯¼å®šè¯­ä»å¥ï¼Œå¢åŠ å¥å­ä¿¡æ¯é‡<br>ä¾‹ï¼š..., which/who/that + ä»å¥`);
                }
            }

            // æ£€æµ‹è®©æ­¥çŠ¶è¯­ä»å¥
            if (lowerSentence.includes('despite') || lowerSentence.includes('although') || lowerSentence.includes('while') || lowerSentence.includes('though')) {
                const connector = lowerSentence.includes('despite') ? 'despite' : 
                                 lowerSentence.includes('although') ? 'although' :
                                 lowerSentence.includes('while') ? 'while' : 'though';
                patterns.push(`<strong>è®©æ­¥çŠ¶è¯­</strong>ï¼šä½¿ç”¨"${connector}"è¡¨è¾¾è½¬æŠ˜å…³ç³»<br>ä¾‹ï¼šDespite/Although + è®©æ­¥å†…å®¹, ä¸»å¥`);
            }

            // æ£€æµ‹éè°“è¯­åŠ¨è¯
            if (sentence.match(/,\s*\w+ing\s/)) {
                const match = sentence.match(/,\s*(\w+ing\s+[^,]+)/);
                if (match) {
                    patterns.push(`<strong>ç°åœ¨åˆ†è¯ä½œçŠ¶è¯­</strong>ï¼š"${match[1]}"ä½œä¼´éš/ç»“æœçŠ¶è¯­<br>ä¾‹ï¼šä¸»å¥, doing sth.ï¼ˆè¡¨ç¤ºä¼´éšæˆ–ç»“æœï¼‰`);
                }
            }

            // æ£€æµ‹not only...but also
            if (lowerSentence.includes('not only') && lowerSentence.includes('but also')) {
                patterns.push(`<strong>å¹¶åˆ—ç»“æ„</strong>ï¼šnot only...but also å¼ºè°ƒé€’è¿›å…³ç³»<br>ä¾‹ï¼šsth. not only A but also B`);
            }

            // æ£€æµ‹it is...thatå¼ºè°ƒå¥
            if (sentence.match(/it\s+is.*?that/i)) {
                patterns.push(`<strong>å¼ºè°ƒå¥å‹</strong>ï¼šIt is...that ç»“æ„çªå‡ºå¼ºè°ƒå†…å®¹<br>ä¾‹ï¼šIt is + è¢«å¼ºè°ƒéƒ¨åˆ† + that + å…¶ä»–`);
            }

            // æ£€æµ‹to doä¸å®šå¼ä½œçŠ¶è¯­
            if (sentence.match(/to\s+\w+.*?,/)) {
                patterns.push(`<strong>ä¸å®šå¼ä½œç›®çš„çŠ¶è¯­</strong>ï¼šTo do sth., ä¸»å¥<br>ä¾‹ï¼šTo improve..., governments must...`);
            }

            // æ£€æµ‹aså¼•å¯¼çš„ä»å¥
            if (lowerSentence.includes(' as ') && sentence.match(/as\s+\w+.*?[,]/)) {
                patterns.push(`<strong>aså¼•å¯¼çš„ä»å¥</strong>ï¼šè¡¨ç¤º"éšç€"æˆ–"å› ä¸º"<br>ä¾‹ï¼šAs + ä»å¥, ä¸»å¥`);
            }

            // æ£€æµ‹withç»“æ„
            if (sentence.match(/with\s+the/i)) {
                patterns.push(`<strong>withä»‹è¯çŸ­è¯­</strong>ï¼šWith the + åè¯ï¼Œä½œåŸå› æˆ–ä¼´éšçŠ¶è¯­<br>ä¾‹ï¼šWith the advancement of..., ...`);
            }

            // æ£€æµ‹è¢«åŠ¨è¯­æ€
            if (sentence.match(/is|are|was|were|be|been\s+\w+(ed|en)\s/)) {
                patterns.push(`<strong>è¢«åŠ¨è¯­æ€</strong>ï¼šbe + è¿‡å»åˆ†è¯ï¼Œçªå‡ºåŠ¨ä½œæ‰¿å—è€…<br>ä¾‹ï¼šä¸»è¯­ + be expected/required/forced to do`);
            }

            // å¦‚æœæ²¡æœ‰æ£€æµ‹åˆ°ç‰¹æ®Šå¥å‹ï¼Œç»™å‡ºåŸºç¡€è¯´æ˜
            if (patterns.length === 0) {
                patterns.push('æœ¬å¥ä½¿ç”¨ä¸»è°“å®¾åŸºæœ¬å¥å‹ï¼Œç»“æ„æ¸…æ™°æ˜äº†');
                patterns.push('å¯ä»¥å°è¯•åŠ å…¥å®šè¯­ä»å¥æˆ–çŠ¶è¯­ä»å¥å¢åŠ å¤æ‚åº¦');
            }

            return patterns;
        }

        // ============ è¯„ä¼°ç¿»è¯‘ï¼ˆç¬¬ä¸‰è½®ï¼‰ ============
        async function evaluateTranslations() {
            const translations = {};
            gameState.teams.forEach(team => {
                const textarea = document.getElementById(`translation${team.id}`);
                translations[team.id] = textarea.value.trim() || 'æœªä½œç­”';
            });

            document.getElementById('loading').classList.add('show');
            await new Promise(resolve => setTimeout(resolve, 2000));

            const word = gameState.currentWord;
            const results = [];

            gameState.teams.forEach(team => {
                const translation = translations[team.id];
                const evaluation = evaluateTranslation(translation, word.round3);
                
                team.score += evaluation.score;
                document.getElementById(`score${team.id}`).textContent = team.score;

                results.push({
                    teamId: team.id,
                    teamName: team.name,
                    translation: translation,
                    score: evaluation.score,
                    feedback: evaluation.feedback
                });
            });

            document.getElementById('loading').classList.remove('show');
            displayTranslationResults(results, word);
        }

        // ============ è¯„åˆ†ç¿»è¯‘ï¼ˆæ»¡åˆ†100ï¼‰ ============
        function evaluateTranslation(translation, round3Data) {
            if (translation === 'æœªä½œç­”') {
                return {
                    score: 0,
                    feedback: {
                        strengths: [],
                        weaknesses: ['æœªæäº¤ç­”æ¡ˆ'],
                        suggestions: ['è¯·åœ¨è§„å®šæ—¶é—´å†…å®Œæˆç¿»è¯‘'],
                        reference: round3Data.reference
                    }
                };
            }

            let score = 0;
            const strengths = [];
            const weaknesses = [];
            const suggestions = [];

            // 1. å…³é”®è¯æ£€æŸ¥ï¼ˆ40åˆ†ï¼‰
            const keywordScore = checkKeywords(translation, round3Data.keywords);
            score += keywordScore;
            
            if (keywordScore >= 30) {
                strengths.push('å…³é”®è¯æ±‡ä½¿ç”¨å‡†ç¡®');
            } else if (keywordScore >= 20) {
                weaknesses.push('éƒ¨åˆ†å…³é”®è¯ç¼ºå¤±');
                suggestions.push('å»ºè®®åŒ…å«ï¼š' + round3Data.keywords.join(', '));
            } else {
                weaknesses.push('å…³é”®è¯æ±‡ä½¿ç”¨ä¸è¶³');
                suggestions.push('å¿…é¡»åŒ…å«ï¼š' + round3Data.keywords.slice(0, 3).join(', '));
            }

            // 2. è¯­æ³•ç»“æ„ï¼ˆ30åˆ†ï¼‰
            const grammarScore = checkGrammar(translation);
            score += grammarScore;
            
            if (grammarScore >= 25) {
                strengths.push('è¯­æ³•ç»“æ„æ­£ç¡®ï¼Œå¥å¼å¤æ‚');
            } else if (grammarScore >= 15) {
                suggestions.push('å¯ä½¿ç”¨å®šè¯­ä»å¥ã€éè°“è¯­ç­‰å¤æ‚å¥å¼');
            } else {
                weaknesses.push('è¯­æ³•ç»“æ„éœ€æ”¹è¿›');
                suggestions.push('æ³¨æ„ä¸»è°“ä¸€è‡´ã€æ—¶æ€å’Œå† è¯');
            }

            // 3. è¡¨è¾¾åœ°é“æ€§ï¼ˆ20åˆ†ï¼‰
            const idiomScore = checkIdiomaticExpression(translation);
            score += idiomScore;
            
            if (idiomScore >= 15) {
                strengths.push('è¡¨è¾¾åœ°é“è‡ªç„¶');
            } else {
                suggestions.push('é¿å…ä¸­å¼è‹±è¯­ï¼Œå‚è€ƒnativeè¡¨è¾¾');
            }

            // 4. é€»è¾‘è¿è´¯æ€§ï¼ˆ10åˆ†ï¼‰
            const coherenceScore = checkCoherence(translation);
            score += coherenceScore;
            
            if (coherenceScore >= 8) {
                strengths.push('é€»è¾‘è¿è´¯ï¼Œå±‚æ¬¡æ¸…æ™°');
            }

            return {
                score: Math.min(100, score),
                feedback: {
                    strengths,
                    weaknesses,
                    suggestions,
                    reference: round3Data.reference
                }
            };
        }

        function checkKeywords(translation, keywords) {
            let score = 0;
            const lowerTrans = translation.toLowerCase();
            
            keywords.forEach(keyword => {
                if (lowerTrans.includes(keyword.toLowerCase())) {
                    score += 40 / keywords.length;
                }
            });
            
            return Math.round(score);
        }

        function checkGrammar(translation) {
            let score = 20;
            
            const wordCount = translation.split(/\s+/).length;
            if (wordCount >= 15 && wordCount <= 30) score += 5;
            if (translation.match(/^[A-Z]/)) score += 2;
            if (translation.match(/[.!?]$/)) score += 3;
            
            return score;
        }

        function checkIdiomaticExpression(translation) {
            let score = 10;
            
            const advancedConnectors = ['however', 'moreover', 'furthermore', 'nevertheless', 'consequently', 'thus', 'therefore'];
            if (advancedConnectors.some(conn => translation.toLowerCase().includes(conn))) {
                score += 5;
            }
            
            if (translation.includes('which') || translation.includes('that') || translation.includes('who')) {
                score += 5;
            }
            
            return score;
        }

        function checkCoherence(translation) {
            return 8;
        }

        // ============ æ˜¾ç¤ºç¿»è¯‘ç»“æœ ============
        function displayTranslationResults(results, word) {
            const container = document.getElementById('scoringResults');
            container.innerHTML = '';
            container.style.display = 'grid';

            results.sort((a, b) => b.score - a.score);

            results.forEach((result, index) => {
                const card = document.createElement('div');
                card.className = `result-card team-${result.teamId}`;

                const stars = 'â­'.repeat(Math.ceil(result.score / 20));

                card.innerHTML = `
                    <div class="result-header">
                        <div class="result-team-name">
                            ${index === 0 ? 'ğŸ¥‡ ' : index === 1 ? 'ğŸ¥ˆ ' : index === 2 ? 'ğŸ¥‰ ' : ''}
                            ${result.teamName}
                        </div>
                        <div class="result-score">${result.score}/100åˆ† ${stars}</div>
                    </div>

                    <div class="result-translation">
                        "${result.translation}"
                    </div>

                    <div class="result-feedback">
                        ${result.feedback.strengths.length > 0 ? `
                            <h5>âœ… ä¼˜ç‚¹ï¼š</h5>
                            <p>${result.feedback.strengths.join('ï¼›')}</p>
                        ` : ''}

                        ${result.feedback.weaknesses.length > 0 ? `
                            <h5 style="color: #e74c3c;">âš ï¸ éœ€æ”¹è¿›ï¼š</h5>
                            <p>${result.feedback.weaknesses.join('ï¼›')}</p>
                        ` : ''}

                        ${result.feedback.suggestions.length > 0 ? `
                            <h5 style="color: #f39c12;">ğŸ’¡ å»ºè®®ï¼š</h5>
                            <p>${result.feedback.suggestions.join('ï¼›')}</p>
                        ` : ''}

                        <h5 style="color: #3498db;">ğŸ“– å‚è€ƒè¯‘æ–‡ï¼š</h5>
                        <p style="font-style: italic; background: #f0f4ff; padding: 10px; border-radius: 5px;">
                            ${result.feedback.reference}
                        </p>
                    </div>
                `;

                container.appendChild(card);
            });

            document.getElementById('nextBtn').style.display = 'inline-block';
        }

        // ============ è¾…åŠ©å‡½æ•° ============
        function generateCollocations(word) {
            const collocations = {
                'attention': ['pay attention to æ³¨æ„', 'draw/attract attention å¸å¼•æ³¨æ„', 'attention span æ³¨æ„åŠ›æŒç»­æ—¶é—´', 'full attention å…¨ç¥è´¯æ³¨'],
                'casualty': ['casualties of war æˆ˜äº‰ä¼¤äº¡', 'heavy casualties é‡å¤§ä¼¤äº¡', 'avoid casualties é¿å…ä¼¤äº¡', 'civilian casualties å¹³æ°‘ä¼¤äº¡'],
                'drown': ['drown in work åŸ‹å¤´å·¥ä½œ', 'be drowned in æ²‰æµ¸äº', 'drowning in debt å€ºå°é«˜ç­‘', 'drown out æ·¹æ²¡ï¼ˆå£°éŸ³ï¼‰'],
                'envious': ['be envious of ç¾¡æ…•/å«‰å¦’', 'envious feelings å«‰å¦’æƒ…ç»ª', 'envious eyes ç¾¡æ…•çš„ç›®å…‰'],
                'ignorant': ['be ignorant of/about å¯¹...æ— çŸ¥', 'remain ignorant ä¿æŒæ— çŸ¥', 'ignorant people æ— çŸ¥çš„äºº'],
                'old-fashioned': ['old-fashioned ideas è¿‡æ—¶çš„æƒ³æ³•', 'old-fashioned way ä¼ ç»Ÿæ–¹å¼', 'old-fashioned values ä¼ ç»Ÿä»·å€¼è§‚'],
                'physician': ['consult a physician å’¨è¯¢åŒ»ç”Ÿ', 'family physician å®¶åº­åŒ»ç”Ÿ', 'licensed physician æŒè¯åŒ»ç”Ÿ'],
                'prescription': ['prescription drugs å¤„æ–¹è¯', 'write a prescription å¼€å¤„æ–¹', 'fill a prescription é…è¯'],
                'slip': ['slip from ä»...æ»‘è½', 'slip away æºœèµ°', 'let slip æ— æ„ä¸­è¯´å‡º', 'slip up çŠ¯é”™'],
                'trend': ['current trend å½“å‰è¶‹åŠ¿', 'trend toward è¶‹å‘äº', 'follow the trend è·Ÿéšæ½®æµ', 'set a trend å¼•é¢†æ½®æµ']
            };
            return collocations[word] || ['å¸¸ç”¨äºæ­£å¼å†™ä½œ', 'é€‚åˆå­¦æœ¯åœºæ™¯'];
        }

        function generateWritingScenarios(word) {
            const scenarios = {
                'attention': ['æ•™è‚²ç±»ï¼šæ³¨æ„åŠ›ä¸å­¦ä¹ æ•ˆç‡çš„å…³ç³»', 'ç§‘æŠ€ç±»ï¼šç¤¾äº¤åª’ä½“å¯¹æ³¨æ„åŠ›çš„å½±å“', 'å·¥ä½œç±»ï¼šä¸“æ³¨åŠ›åœ¨èŒåœºçš„é‡è¦æ€§'],
                'casualty': ['ç¤¾ä¼šç±»ï¼šç¾å®³ä¸å®‰å…¨é—®é¢˜', 'æˆ˜äº‰ç±»ï¼šå’Œå¹³çš„é‡è¦æ€§', 'å¥åº·ç±»ï¼šäº¤é€šäº‹æ•…é¢„é˜²'],
                'drown': ['å‹åŠ›ç±»ï¼šç°ä»£äººçš„å·¥ä½œå‹åŠ›', 'æ—¶é—´ç®¡ç†ç±»ï¼šå¦‚ä½•åº”å¯¹ç¹å¿™', 'å¿ƒç†å¥åº·ç±»ï¼šé¿å…è¢«è´Ÿé¢æƒ…ç»ªæ·¹æ²¡'],
                'envious': ['ç¤¾ä¼šå¿ƒç†ç±»ï¼šæ”€æ¯”ç°è±¡åˆ†æ', 'æ•™è‚²ç±»ï¼šåŸ¹å…»æ­£ç¡®ä»·å€¼è§‚', 'ç¤¾äº¤åª’ä½“ç±»ï¼šè™šæ‹Ÿä¸–ç•Œçš„å½±å“'],
                'ignorant': ['æ•™è‚²ç±»ï¼šçŸ¥è¯†çš„é‡è¦æ€§', 'æ–‡åŒ–ç±»ï¼šäº†è§£æ–‡åŒ–å·®å¼‚', 'èŒåœºç±»ï¼šæŒç»­å­¦ä¹ çš„å¿…è¦æ€§'],
                'old-fashioned': ['ç§‘æŠ€ç±»ï¼šä¼ ç»Ÿä¸åˆ›æ–°çš„å¹³è¡¡', 'æ•™è‚²ç±»ï¼šä¼ ç»Ÿæ•™å­¦æ³•çš„ä»·å€¼', 'æ–‡åŒ–ç±»ï¼šä¼ ç»Ÿæ–‡åŒ–çš„ä¼ æ‰¿'],
                'physician': ['åŒ»ç–—ç±»ï¼šåŒ»æ‚£å…³ç³»æ¢è®¨', 'å¥åº·ç±»ï¼šé¢„é˜²ä¿å¥', 'ç§‘æŠ€ç±»ï¼šAIåœ¨åŒ»ç–—ä¸­çš„åº”ç”¨'],
                'prescription': ['åŒ»ç–—ç±»ï¼šè¯å“ä½¿ç”¨å®‰å…¨', 'å¥åº·ç±»ï¼šè¯ç‰©æ»¥ç”¨é—®é¢˜', 'ç›‘ç®¡ç±»ï¼šè¯å“ç®¡ç†æ”¿ç­–'],
                'slip': ['æ•™è‚²ç±»ï¼šå­¦ä¹ æˆç»©æ³¢åŠ¨', 'èŒåœºç±»ï¼šç«äº‰åŠ›ç»´æŒ', 'ç»æµç±»ï¼šå¸‚åœºåœ°ä½å˜åŒ–'],
                'trend': ['ç¤¾ä¼šç±»ï¼šæµè¡Œè¶‹åŠ¿åˆ†æ', 'ç§‘æŠ€ç±»ï¼šå‘å±•æ–¹å‘é¢„æµ‹', 'ç¯å¢ƒç±»ï¼šå¯æŒç»­å‘å±•è¶‹åŠ¿']
            };
            return scenarios[word] || ['é€‚ç”¨äºè®®è®ºæ–‡å†™ä½œ', 'å¯ç”¨äºæè¿°ç¤¾ä¼šç°è±¡'];
        }

        function generateUsageNotes(word) {
            const notes = {
                'attention': ['pay attentionåæ¥toï¼Œä¸æ¥on', 'attentionæ˜¯ä¸å¯æ•°åè¯', 'attract/draw attentionè¡¨ç¤º"å¸å¼•æ³¨æ„"'],
                'casualty': ['é€šå¸¸ç”¨å¤æ•°å½¢å¼casualties', 'æŒ‡æˆ˜äº‰ã€ç¾å®³ç­‰çš„ä¼¤äº¡è€…', 'åŒºåˆ«äºvictimï¼ˆå—å®³è€…ï¼ŒèŒƒå›´æ›´å¹¿ï¼‰'],
                'drown': ['è¿‡å»å¼å’Œè¿‡å»åˆ†è¯å‡ä¸ºdrowned', 'å¯ç”¨äºæ¯”å–»ä¹‰ï¼šè¢«...æ·¹æ²¡', 'drown oneself in = immerse oneself in'],
                'envious': ['åæ¥ofï¼Œä¸æ¥about', 'åŒºåˆ«äºjealousï¼ˆå«‰å¦’ç¨‹åº¦æ›´å¼ºï¼‰', 'å¯ä»¥æ˜¯ä¸­æ€§æˆ–è´¬ä¹‰ï¼Œè§†è¯­å¢ƒè€Œå®š'],
                'ignorant': ['åæ¥ofæˆ–about', 'ä¸è¦æ‹¼æˆignorent', 'å¯ç”¨completely/totallyç­‰å‰¯è¯ä¿®é¥°'],
                'old-fashioned': ['æ³¨æ„æœ‰è¿å­—ç¬¦', 'å¯ä½œè¡¨è¯­æˆ–å®šè¯­', 'è´¬ä¹‰ã€ä¸­æ€§æˆ–è¤’ä¹‰ï¼Œå–å†³äºè¯­å¢ƒ'],
                'physician': ['æ­£å¼ç”¨è¯­ï¼ŒæŒ‡å†…ç§‘åŒ»ç”Ÿ', 'ç¾å¼è‹±è¯­ä¸­æ›´å¸¸ç”¨', 'åŒºåˆ«äºsurgeonï¼ˆå¤–ç§‘åŒ»ç”Ÿï¼‰'],
                'prescription': ['å¯æ•°åè¯', 'å¸¸ä¸drug, medicineæ­é…', 'åŠ¨è¯å½¢å¼ä¸ºprescribe'],
                'slip': ['åŸºæœ¬ä¹‰ä¸º"æ»‘åŠ¨"', 'å¼•ç”³ä¹‰ï¼šä¸‹é™ã€è¡°é€€ã€ç–å¿½', 'è¿‡å»å¼å’Œè¿‡å»åˆ†è¯ä¸ºslipped'],
                'trend': ['å¸¸ä¸toward/towardsæ­é…', 'current/recentä¿®é¥°è¡¨ç¤ºå½“å‰è¶‹åŠ¿', 'ä¹Ÿå¯ä½œåŠ¨è¯ï¼Œè¡¨ç¤º"è¶‹å‘"']
            };
            return notes[word] || ['æ³¨æ„è¯æ€§å˜åŒ–', 'æ³¨æ„æ‹¼å†™'];
        }

        function analyzeHighlights(sentence) {
            const highlights = [];
            
            if (sentence.includes('increasingly')) highlights.push('"increasingly" - é«˜çº§å‰¯è¯ï¼Œè¡¨ç¤º"æ—¥ç›Š"ï¼Œä½“ç°å˜åŒ–è¶‹åŠ¿');
            if (sentence.includes('significantly')) highlights.push('"significantly" - å­¦æœ¯è¯æ±‡ï¼Œè¡¨ç¤º"æ˜¾è‘—åœ°"ï¼Œå¢å¼ºç¨‹åº¦');
            if (sentence.includes('comprehensive')) highlights.push('"comprehensive" - æ­£å¼ç”¨è¯­ï¼Œè¡¨ç¤º"å…¨é¢çš„"');
            if (sentence.includes('fundamental')) highlights.push('"fundamentally" - è¡¨ç¤º"æ ¹æœ¬åœ°"ï¼Œå¼ºè°ƒæ·±å±‚å½±å“');
            if (sentence.includes('numerous')) highlights.push('"numerous" - æ›¿ä»£manyï¼Œæ›´æ­£å¼');
            if (sentence.includes('excessive')) highlights.push('"excessive" - è¡¨ç¤º"è¿‡åº¦çš„"ï¼Œæ¯”too muchæ›´å­¦æœ¯');
            if (sentence.match(/which|that|who/)) highlights.push('ä½¿ç”¨å®šè¯­ä»å¥ï¼Œå¢åŠ ä¿¡æ¯å¯†åº¦');
            if (sentence.match(/despite|although|while|though/i)) highlights.push('ä½¿ç”¨è®©æ­¥çŠ¶è¯­ï¼Œé€»è¾‘ä¸¥è°¨');
            if (sentence.match(/,\s*\w+ing\s/)) highlights.push('ä½¿ç”¨åˆ†è¯ç»“æ„ï¼Œå¥å¼çµæ´»');
            
            if (highlights.length === 0) {
                highlights.push('å¥å¼ç»“æ„å®Œæ•´ï¼Œè¡¨è¾¾æ¸…æ™°');
            }
            
            return highlights;
        }

        function generateAlternatives(word) {
            const alternatives = {
                'attention': ['focus å…³æ³¨', 'concentration ä¸“æ³¨', 'notice æ³¨æ„', 'awareness æ„è¯†'],
                'casualties': ['victims å—å®³è€…', 'fatalities æ­»äº¡äººæ•°', 'injuries å—ä¼¤äººå‘˜', 'deaths æ­»äº¡'],
                'drowning': ['overwhelmed ä¸å ªé‡è´Ÿ', 'swamped åº”æ¥ä¸æš‡', 'buried åŸ‹å¤´äº', 'flooded å……æ–¥'],
                'envious': ['jealous å«‰å¦’çš„', 'covetous è´ªå©ªçš„', 'resentful ä¸æ»¡çš„'],
                'ignorant': ['unaware ä¸çŸ¥é“çš„', 'uninformed ä¸äº†è§£çš„', 'oblivious æœªå¯Ÿè§‰çš„', 'clueless æ¯«æ— æ¦‚å¿µçš„'],
                'old-fashioned': ['traditional ä¼ ç»Ÿçš„', 'conventional å¸¸è§„çš„', 'outdated è¿‡æ—¶çš„', 'obsolete æ·˜æ±°çš„'],
                'physicians': ['doctors åŒ»ç”Ÿ', 'medical practitioners åŒ»ç–—ä»ä¸šè€…', 'clinicians ä¸´åºŠåŒ»ç”Ÿ'],
                'prescription': ['medication è¯ç‰©æ²»ç–—', 'medicine è¯å“', 'drug è¯ç‰©'],
                'slip': ['decline ä¸‹é™', 'fall è·Œè½', 'drop é™ä½', 'slide æ»‘è½'],
                'trend': ['tendency å€¾å‘', 'movement è¿åŠ¨/è¶‹åŠ¿', 'direction æ–¹å‘', 'pattern æ¨¡å¼']
            };
            return alternatives[word] || ['æ ¹æ®è¯­å¢ƒé€‰æ‹©åŒä¹‰è¯'];
        }

        // ============ ä¸‹ä¸€é¢˜ ============
        function nextQuestion() {
            gameState.wordIndex++;

            if (gameState.wordIndex >= gameState.words.length) {
                if (gameState.round < 3) {
                    gameState.round++;
                    gameState.wordIndex = 0;
                    showQuestion();
                } else {
                    showFinalResults();
                }
            } else {
                showQuestion();
            }
        }

        // ============ æœ€ç»ˆç»“æœ ============
        function showFinalResults() {
            const sortedTeams = [...gameState.teams].sort((a, b) => b.score - a.score);

            let html = `
                <div style="text-align: center; padding: 50px;">
                    <h1 style="font-size: 4em; color: white; margin-bottom: 30px;">
                        ğŸ† æ¸¸æˆç»“æŸï¼
                    </h1>
                </div>
            `;

            const container = document.getElementById('gameArea');
            container.innerHTML = html;

            const resultsCard = document.createElement('div');
            resultsCard.className = 'scoreboard';
            resultsCard.innerHTML = `
                <h2 style="font-size: 3em; margin-bottom: 40px;">ğŸ… æœ€ç»ˆæ’å</h2>
                <div style="max-width: 800px; margin: 0 auto;">
                    ${sortedTeams.map((team, index) => `
                        <div style="display: flex; justify-content: space-between; align-items: center;
                                    padding: 30px; margin: 20px 0; background: white;
                                    border-radius: 15px; border-left: 8px solid;
                                    border-color: ${['#e74c3c', '#3498db', '#2ecc71', '#f39c12', '#9b59b6'][team.id-1]};
                                    box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                            <div style="display: flex; align-items: center; gap: 20px;">
                                <div style="font-size: 3em;">
                                    ${index === 0 ? 'ğŸ¥‡' : index === 1 ? 'ğŸ¥ˆ' : index === 2 ? 'ğŸ¥‰' : `#${index+1}`}
                                </div>
                                <div>
                                    <div style="font-size: 2em; font-weight: bold; color: #2c3e50;">
                                        ${team.name}
                                    </div>
                                </div>
                            </div>
                            <div style="font-size: 3em; font-weight: bold; 
                                        color: ${['#e74c3c', '#3498db', '#2ecc71', '#f39c12', '#9b59b6'][team.id-1]};">
                                ${team.score}åˆ†
                            </div>
                        </div>
                    `).join('')}
                </div>

                <div class="controls" style="margin-top: 50px;">
                    <button class="btn btn-primary" onclick="location.reload()" 
                            style="font-size: 1.8em; padding: 25px 50px;">
                        ğŸ”„ é‡æ–°å¼€å§‹
                    </button>
                </div>
            `;

            container.appendChild(resultsCard);
        }

        // ============ é‡æ–°å¼€å§‹ ============
        function resetGame() {
            if (confirm('ç¡®å®šè¦é‡æ–°å¼€å§‹å—ï¼Ÿå½“å‰è¿›åº¦å°†ä¸¢å¤±ã€‚')) {
                location.reload();
            }
        }
    </script>
</body>
</html>
